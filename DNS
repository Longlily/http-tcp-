1、域名层级
主机名.次级域名.顶级域名.根域名
2、根域名服务器
从"根域名服务器"查到"顶级域名服务器"的NS记录和A记录（IP地址）
从"顶级域名服务器"查到"次级域名服务器"的NS记录和A记录（IP地址）
从"次级域名服务器"查出"主机名"的IP地址
"根域名服务器"的NS记录和IP地址一般是不会变化的，所以内置在DNS服务器里面

3、分级查询
dig +trace 域名 查询DNS的整个分级查询过程

4、DNS记录类型
（1） A：地址记录（Address），返回域名指向的IP地址。
（2） NS：域名服务器记录（Name Server），返回保存下一级域名信息的服务器地址。该记录只能设置为域名，不能设置为IP地址。
（3）MX：邮件记录（Mail eXchange），返回接收电子邮件的服务器地址。
（4）CNAME：规范名称记录（Canonical Name），返回另一个域名，即当前查询的域名是另一个域名的跳转，详见下文。
（5）PTR：逆向查询记录（Pointer Record），只用于从IP地址查询域名。


CNAME记录主要用于域名的内部跳转，为服务器配置提供灵活性，用户感知不到。cname记录就是一个替换
好处：并更服务器ip时，只需修改cname对应的域名，而无需修改用户访问的域名

-------------------------------------------------CDN------------------------------------
1、 通过用户就近性和服务器负载的判断，CDN确保内容以一种极为高效的方式为用户的请求提供服务。总的来说，内容服务基于缓存服务器，也称作代理缓存(Surrogate)，它位于网络的边缘，距用户仅有"一跳"(Single Hop)之遥。代理缓存是内容提供商源服务器（通常位于CDN服务提供商的数据中心）的一个透明镜像。这样的架构使得CDN服务提供商能够代表他们客户，即内容供应商，向最终用户提供尽可能好的体验

把网站内容复制到CDN服务器上。 IDC全国有几个机房就有几个镜像

用cname方式指向CDN网络Cache服务器的地址。 CDN网络架构主要由两大部分，分为中心和边缘两部分，中心指CDN网管中心和DNS重定向解析中心，负责全局负载均衡，设备系统安装在管理中心机房，边缘主要指异地节点，CDN分发的载体，主要由Cache和负载均衡器等组成。
当用户访问加入CDN服务的网站时，域名解析请求将最终交给全局负载均衡DNS进行处理。全局负载均衡DNS通过一组预先定义好的策略，将当时最接近用户的节点地址提供给用户，使用户能够得到快速的服务。同时，它还与分布在世界各地的所有CDNC节点保持通信，搜集各节点的通信状态，确保不将用户的请求分配到不可用的CDN节点上，实际上是通过DNS做全局负载均衡。

每个CDN节点由两部分组成：负载均衡设备和高速缓存服务器

CDN 原理：为 用户访问域名（如：m.haodf.com） 加个CNAME 到cdn提供商的域名（如：cache.com ）。然后DNS对CNAME指向的域名进行特殊处理，解析到cdn运营商的ip，然后再dns解析（根据负载均衡、就近原则） 让用户访问到最近的ip
